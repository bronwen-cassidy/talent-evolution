<?xml version='1.0' encoding='UTF-8'?>
<!--
Tests for user "orphmgr" who has been assigned to the "People without positions" domain
Checks that user can search for people and only see the orphans, and cannot see any positions or OUs.
-->
<tg4w version="0.38.2">
    <actions>
        <action type="goto" refresh="true" step="0">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/login.htm]]></value>
        </action>
        <action type="verify-title" step="1">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Login]]></value>
        </action>
        <action type="fill" step="2">
            <xpath><![CDATA[*/FORM[@ID="_login"]/*/INPUT[@TYPE="text" and @NAME="username"]]]></xpath>
            <value><![CDATA[orphmgr]]></value>
        </action>
        <action type="fill" step="3">
            <xpath><![CDATA[*/FORM[@ID="_login"]/*/INPUT[@TYPE="password" and @NAME="password"]]]></xpath>
            <value><![CDATA[orphmgr]]></value>
        </action>
        <action type="click" refresh="true" step="4">
            <xpath><![CDATA[*/FORM[@ID="_login"]/*/INPUT[@ID="loginsubmit"]]]></xpath>
            <value><![CDATA[null]]></value>
        </action>
        <action type="verify-title" step="5">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Policy]]></value>
        </action>
        <action type="check" step="6">
            <xpath><![CDATA[*/FORM[@ID="policyform"]/*/INPUT[@TYPE="checkbox" and @NAME="acceptedPolicy"]]]></xpath>
            <value><![CDATA[true]]></value>
        </action>
        <action type="click" refresh="true" step="7">
            <xpath><![CDATA[*/FORM[@ID="policyform"]/*/INPUT[@ID="accept"]]]></xpath>
            <value><![CDATA[Agree]]></value>
        </action>
        <action type="verify-title" step="8">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Home]]></value>
        </action>
        <action type="click" refresh="true" step="9">
            <xpath><![CDATA[A[@ID="a_ORGANISATIONMODULE"]]]></xpath>
            <value><![CDATA[]]></value>
        </action>
        <action type="verify-title" refresh="true" step="10">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Organisation Home]]></value>
        </action>
        <action type="goto" refresh="true" step="11">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/listsubject.htm]]></value>
        </action>
        <action type="verify-title" step="12">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - People Search]]></value>
        </action>
        <action type="click" refresh="true" step="13">
            <xpath><![CDATA[*/FORM[@ID="subject"]/*/INPUT[@NAME="_target3" and @VALUE="Search"]]]></xpath>
            <value><![CDATA[_target3]]></value>
        </action>
        <action type="verify-title" step="14">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - People Search]]></value>
        </action>
        <action type="assert-text-exists" step="15">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[One item found.]]></value>
        </action>
        <action type="click" step="16">
            <xpath><![CDATA[A[@ID="a_browse"]]]></xpath>
            <value><![CDATA[]]></value>
        </action>
        <action type="assert-text-exists" refresh="true" step="17">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Summary of Rinus Michels]]></value>
        </action>
        <action type="goto" refresh="true" step="18">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/listposition.htm]]></value>
        </action>
        <action type="verify-title" step="19">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Position Search]]></value>
        </action>
        <action type="click" refresh="true" step="20">
            <xpath><![CDATA[*/FORM[@ID="position"]/*/INPUT[@NAME="_target3" and @VALUE="Search"]]]></xpath>
            <value><![CDATA[_target3]]></value>
        </action>
        <action type="verify-title" step="21">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Position Search]]></value>
        </action>
        <action type="assert-text-exists" step="22">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Nothing found to display.]]></value>
        </action>

        <action type="goto" refresh="true" step="23">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/vieworganisation.htm?id=0]]></value>
        </action>
        <action type="verify-title" step="24">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Access Denied]]></value>
        </action>

        <action type="goto" refresh="true" step="25">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/viewposition.htm?command.node.id=1]]></value>
        </action>
        <action type="verify-title" step="26">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Access Denied]]></value>
        </action>

        <!-- try to access a normal subject -->
        <action type="goto" refresh="true" step="27">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/viewsubject.htm?command.node.id=16]]></value>
        </action>
        <action type="verify-title" step="28">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Access Denied]]></value>
        </action>

        <!-- check there is no link to access the "Holland 1988" OU -->        
        <action type="goto" refresh="true" step="29">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/listorganisations.htm]]></value>
        </action>
        <action type="verify-title" step="30">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Organisation Units]]></value>
        </action>
        <action type="click" refresh="true" step="31">
            <xpath><![CDATA[A[@ID="folder_0"]]]></xpath>
            <value><![CDATA[]]></value>
        </action>
        <action type="verify-title" step="32">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Organisation Units]]></value>
        </action>
        <action type="assert-text-does-not-exist" step="33">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[item_12]]></value>
        </action>
    </actions>
</tg4w>