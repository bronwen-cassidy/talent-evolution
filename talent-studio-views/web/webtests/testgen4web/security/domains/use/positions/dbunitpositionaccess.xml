<?xml version='1.0' encoding='UTF-8'?>
<!--
Tests for user "posmgr" who has been assigned to a security domain with full position control
and linked to the "Holland 1988" OU.
Checks that user can search for positions
and only see the ones in the above OU, but cannot see any people or OUs.
-->
<tg4w version="0.38.2">
    <actions>
        <action type="goto" refresh="true" step="0">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/login.htm]]></value>
        </action>
        <action type="verify-title" step="1">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Login]]></value>
        </action>
        <action type="fill" step="2">
            <xpath><![CDATA[*/FORM[@ID="_login"]/*/INPUT[@TYPE="text" and @NAME="username"]]]></xpath>
            <value><![CDATA[posmgr]]></value>
        </action>
        <action type="fill" step="3">
            <xpath><![CDATA[*/FORM[@ID="_login"]/*/INPUT[@TYPE="password" and @NAME="password"]]]></xpath>
            <value><![CDATA[posmgr]]></value>
        </action>
        <action type="click" refresh="true" step="4">
            <xpath><![CDATA[*/FORM[@ID="_login"]/*/INPUT[@ID="loginsubmit"]]]></xpath>
            <value><![CDATA[null]]></value>
        </action>
        <action type="verify-title" step="5">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Policy]]></value>
        </action>
        <action type="check" step="6">
            <xpath><![CDATA[*/FORM[@ID="policyform"]/*/INPUT[@TYPE="checkbox" and @NAME="acceptedPolicy"]]]></xpath>
            <value><![CDATA[true]]></value>
        </action>
        <action type="click" refresh="true" step="7">
            <xpath><![CDATA[*/FORM[@ID="policyform"]/*/INPUT[@ID="accept"]]]></xpath>
            <value><![CDATA[Agree]]></value>
        </action>
        <action type="verify-title" step="8">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Home]]></value>
        </action>
        <action type="click" refresh="true" step="9">
            <xpath><![CDATA[A[@ID="a_ORGANISATIONMODULE"]]]></xpath>
            <value><![CDATA[]]></value>
        </action>
        <action type="verify-title" refresh="true" step="10">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Organisation Home]]></value>
        </action>
        <action type="goto" refresh="true" step="11">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/listsubject.htm]]></value>
        </action>
        <action type="verify-title" step="12">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - People Search]]></value>
        </action>
        <action type="click" refresh="true" step="13">
            <xpath><![CDATA[*/FORM[@ID="subject"]/*/INPUT[@NAME="_target3" and @VALUE="Search"]]]></xpath>
            <value><![CDATA[_target3]]></value>
        </action>
        <action type="verify-title" step="14">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - People Search]]></value>
        </action>
        <action type="assert-text-exists" refresh="true" step="15">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Nothing found to display.]]></value>
        </action>
        <action type="goto" refresh="true" step="16">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/listposition.htm]]></value>
        </action>
        <action type="verify-title" step="17">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Position Search]]></value>
        </action>
        <action type="click" refresh="true" step="18">
            <xpath><![CDATA[*/FORM[@ID="position"]/*/INPUT[@NAME="_target3" and @VALUE="Search"]]]></xpath>
            <value><![CDATA[_target3]]></value>
        </action>
        <action type="verify-title" step="19">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Position Search]]></value>
        </action>
        <action type="assert-text-exists" step="20">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[3 items found, displaying all items.]]></value>
        </action>
        <action type="assert-text-exists" step="21">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Centre forward]]></value>
        </action>
        <action type="assert-text-exists" step="22">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Centre half]]></value>
        </action>
        <action type="assert-text-does-not-exist" step="23">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Defensive midfielder]]></value>
        </action>
        <action type="assert-text-exists" step="24">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Inside forward]]></value>
        </action>
        <action type="click" step="25">
            <xpath><![CDATA[A[@ID="a_browse"]]]></xpath>
            <value><![CDATA[]]></value>
        </action>
        <action type="assert-text-exists" step="26">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Summary of Centre forward]]></value>
        </action>
        <action type="click" step="27">
            <xpath><![CDATA[A[@ID="a_incumbents"]]]></xpath>
            <value><![CDATA[]]></value>
        </action>
        <action type="assert-text-exists" step="28">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Marco Van Basten]]></value>
        </action>

        <action type="goto" refresh="true" step="29">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/vieworganisation.htm?id=0]]></value>
        </action>
        <action type="verify-title" step="30">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Access Denied]]></value>
        </action>

        <action type="goto" refresh="true" step="31">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/vieworganisation.htm?id=12]]></value>
        </action>
        <action type="verify-title" step="32">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Access Denied]]></value>
        </action>

        <action type="goto" refresh="true" step="33">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/viewsubject.htm?command.node.id=16]]></value>
        </action>
        <action type="verify-title" step="34">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Access Denied]]></value>
        </action>

        <action type="goto" refresh="true" step="35">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/viewsubject.htm?command.node.id=23]]></value>
        </action>
        <action type="verify-title" step="36">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Access Denied]]></value>
        </action>

        <!-- attempt to access position not in area -->
        <action type="goto" refresh="true" step="37">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/viewposition.htm?command.node.id=21]]></value>
        </action>
        <action type="verify-title" step="38">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Access Denied]]></value>
        </action>

        <!-- check there is no link to access the "Holland 1988" OU -->
        <action type="goto" refresh="true" step="39">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/listorganisations.htm]]></value>
        </action>
        <action type="verify-title" step="40">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Organisation Units]]></value>
        </action>
        <action type="click" refresh="true" step="41">
            <xpath><![CDATA[A[@ID="folder_0"]]]></xpath>
            <value><![CDATA[]]></value>
        </action>
        <action type="verify-title" step="42">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Organisation Units]]></value>
        </action>
        <action type="assert-text-does-not-exist" step="43">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[item_12]]></value>
        </action>        
    </actions>
</tg4w>