<?xml version='1.0' encoding='UTF-8'?>
<tg4w version="0.38.2">
    <actions>
        <action type="goto" refresh="true" step="0">
            <xpath><![CDATA[window.location.href]]></xpath>
            <value><![CDATA[http://localhost:8888/talent-studio/orgbuilder/addposition.htm?navigator.notSubmit=true]]></value>
        </action>
        <action type="verify-title" step="1">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Add Position]]></value>
        </action>

        <!-- click next without filling in mandatory fields - will cause validation errors -->
        <action type="click" refresh="true" step="2">
            <xpath><![CDATA[*/FORM[@ID="_next"]/*/INPUT[@NAME="_target1" and @VALUE="Next >>"]]]></xpath>
            <value><![CDATA[_target1]]></value>
        </action>
        <action type="verify-title" step="3">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Add Position]]></value>
        </action>
        <action type="assert-text-exists" step="4">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Title is a required field.]]></value>
        </action>
        <action type="assert-text-exists" step="5">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[You must select a parent organisation unit.]]></value>
        </action>

        <!-- set title comments and org unit and click next -->
        <action type="fill" step="6">
            <xpath><![CDATA[*/FORM[@ID="_next"]/*/INPUT[@TYPE="text" and @NAME="position.title"]]]></xpath>
            <value><![CDATA[Backing Vocals]]></value>
        </action>
        <action type="fill" step="7">
            <xpath><![CDATA[*/FORM[@ID="_next"]/*/INPUT[@TYPE="hidden" and @NAME="position.organisationUnit.id"]]]></xpath>
            <value><![CDATA[16]]></value>
        </action>
        <action type="fill" step="8">
            <xpath><![CDATA[*/FORM[@ID="_next"]/*/TEXTAREA[@NAME="position.comments"]]]></xpath>
            <value><![CDATA[the backing vocals position]]></value>
        </action>
        <action type="click" refresh="true" step="9">
            <xpath><![CDATA[*/FORM[@ID="_next"]/*/INPUT[@NAME="_target1" and @VALUE="Next >>"]]]></xpath>
            <value><![CDATA[_target1]]></value>
        </action>

        <!-- click save without setting the primary association - will cause validation errors -->
        <action type="verify-title" step="10">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Add Position]]></value>
        </action>
        <action type="click" refresh="true" step="11">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/INPUT[@NAME="_finish" and @VALUE="Save"]]]></xpath>
            <value><![CDATA[_finish]]></value>
        </action>
        <action type="verify-title" step="12">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Add Position]]></value>
        </action>
        <action type="assert-text-exists" step="13">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[You must select a qualifier for the association.]]></value>
        </action>
        <action type="assert-text-exists" step="14">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Please select a valid target for the association.]]></value>
        </action>

        <!-- add secondary association and check no validation errors reported  -->
        <action type="click" refresh="true" step="15">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/INPUT[@NAME="_addAssociation" and @VALUE="Add"]]]></xpath>
            <value><![CDATA[_addAssociation]]></value>
        </action>
        <action type="verify-title" step="16">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Add Position]]></value>
        </action>
        <action type="assert-text-does-not-exist" step="17">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[You must select a qualifier for the association.]]></value>
        </action>
        <action type="assert-text-does-not-exist" step="18">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Please select a valid target for the association.]]></value>
        </action>

        <!-- set primary association qualifier and target -->
        <action type="select" step="19">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/SELECT[@NAME="primaryAssociation.qualifierId"]]]></xpath>
            <value><![CDATA[19]]></value>
        </action>
        <action type="select" step="20">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/INPUT[@TYPE="hidden" and @NAME="primaryAssociation.targetId"]]]></xpath>
            <value><![CDATA[17]]></value>
        </action>

        <!-- save without setting first secondary association qualifier and target - will cause validation errors -->
        <action type="click" refresh="true" step="21">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/INPUT[@NAME="_finish" and @VALUE="Save"]]]></xpath>
            <value><![CDATA[_finish]]></value>
        </action>
        <action type="verify-title" step="22">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Add Position]]></value>
        </action>
        <action type="assert-text-exists" step="23">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[You must select a qualifier for the association.]]></value>
        </action>
        <action type="assert-text-exists" step="24">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Please select a valid target for the association.]]></value>
        </action>

        <!-- add 2 more secondary associations -->
        <action type="click" refresh="true" step="25">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/INPUT[@NAME="_addAssociation" and @VALUE="Add"]]]></xpath>
            <value><![CDATA[_addAssociation]]></value>
        </action>
        <action type="verify-title" step="26">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Add Position]]></value>
        </action>
        <action type="click" refresh="true" step="27">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/INPUT[@NAME="_addAssociation" and @VALUE="Add"]]]></xpath>
            <value><![CDATA[_addAssociation]]></value>
        </action>
        <action type="verify-title" step="28">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Add Position]]></value>
        </action>

        <!-- set the qualifiers for the 1st and last secondary associations -->
        <action type="select" step="29">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/SELECT[@NAME="secondaryAssociations[0].qualifierId"]]]></xpath>
            <value><![CDATA[21]]></value>
        </action>
        <action type="select" step="30">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/SELECT[@NAME="secondaryAssociations[2].qualifierId"]]]></xpath>
            <value><![CDATA[22]]></value>
        </action>

        <!-- delete the middle secondary association and check there are no validation errors reported -->
        <action type="click" refresh="true" step="31">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/INPUT[@NAME="_deleteAssoc:1" and @VALUE="Delete"]]]></xpath>
            <value><![CDATA[_deleteAssoc:1]]></value>
        </action>
        <action type="verify-title" step="32">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Add Position]]></value>
        </action>
        <action type="assert-text-does-not-exist" step="33">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Please select a valid target for the association.]]></value>
        </action>

        <!-- set target for both secondary associations to be the same - this means they will be duplicates -->
        <action type="select" step="34">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/INPUT[@TYPE="hidden" and @NAME="secondaryAssociations[0].targetId"]]]></xpath>
            <value><![CDATA[1]]></value>
        </action>
        <action type="select" step="35">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/INPUT[@TYPE="hidden" and @NAME="secondaryAssociations[1].targetId"]]]></xpath>
            <value><![CDATA[1]]></value>
        </action>
        <action type="click" refresh="true" step="36">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/INPUT[@NAME="_finish" and @VALUE="Save"]]]></xpath>
            <value><![CDATA[_finish]]></value>
        </action>
        <action type="verify-title" step="37">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Add Position]]></value>
        </action>
        <action type="assert-text-exists" step="38">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[The association target must be unique.]]></value>
        </action>

        <!-- change qualifier of first to be same as first - will still get validation errors due to duplicate secondary asssociation -->
        <action type="select" step="39">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/SELECT[@NAME="secondaryAssociations[1].qualifierId"]]]></xpath>
            <value><![CDATA[21]]></value>
        </action>
        <action type="click" refresh="true" step="40">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/INPUT[@NAME="_finish" and @VALUE="Save"]]]></xpath>
            <value><![CDATA[_finish]]></value>
        </action>
        <action type="verify-title" step="41">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Add Position]]></value>
        </action>
        <action type="assert-text-exists" step="42">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[The association target must be unique.]]></value>
        </action>

        <!-- change target but not qualifier to make this a non-duplicate secondary assoc -->
        <action type="select" step="43">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/INPUT[@TYPE="hidden" and @NAME="secondaryAssociations[1].targetId"]]]></xpath>
            <value><![CDATA[20]]></value>
        </action>
        <action type="click" refresh="true" step="44">
            <xpath><![CDATA[*/FORM[@ID="_addAssoc"]/*/INPUT[@NAME="_finish" and @VALUE="Save"]]]></xpath>
            <value><![CDATA[_finish]]></value>
        </action>

        <!-- verify view page -->
        <action type="verify-title" step="45">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Position]]></value>
        </action>
        <action type="assert-text-exists" step="46">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Summary of Backing Vocals]]></value>
        </action>
        <action type="assert-text-exists" step="47">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Provisional]]></value>
        </action>
        <action type="assert-text-exists" step="48">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Led Zeppelin]]></value>
        </action>
        <action type="assert-text-exists" step="49">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Vocals]]></value>
        </action>
        <action type="assert-text-exists" step="50">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Provisional]]></value>
        </action>
        <action type="assert-text-exists" step="51">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Default Position]]></value>
        </action>
        <action type="assert-text-exists" step="52">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Drums]]></value>
        </action>

        <!-- delete position -->
        <action type="click" refresh="true" step="53">
            <xpath><![CDATA[*/FORM[@ID="_delete"]/INPUT[@ID="btn_deletepos"]]]></xpath>
            <value><![CDATA[_delete]]></value>
        </action>
        <action type="verify-title" step="54">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Delete Position]]></value>
        </action>
        <action type="assert-text-exists" step="55">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Please confirm that you wish to delete this position. This action cannot be undone. The position and all the positions listed that report to this position will be deleted.]]></value>
        </action>
        <action type="click" refresh="true" step="56">
            <xpath><![CDATA[*/FORM[@ID="_delete"]/INPUT[@NAME="_delete" and @VALUE="Confirm"]]]></xpath>
            <value><![CDATA[_delete]]></value>
        </action>
        <action type="verify-title" step="57">
            <xpath><![CDATA[*]]></xpath>
            <value><![CDATA[Talent Studio - Menu]]></value>
        </action>
    </actions>
</tg4w>